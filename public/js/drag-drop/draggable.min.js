//$(document).ready(function () {
function dragulaMove(){
    var containers = $('.addQuestion').toArray();
    // dragula([document.getElementById("card-drag-area")]), dragula([document.getElementById("card-move")]).on("drag", function (e) {
    dragula([document.getElementById("card-drag-area")]), dragula(containers).on("drag", function (e) {
        e.className = e.className.replace("card-moved", "")
    }).on("drop", function (e) {
        var page_number = $(e).closest('.pageDiv').find('#page_number').val();
        //console.log(page_number);
        orderNumbers = [];
        dataIds = [];
        $("#page" + page_number).find('.dataClass').each(function (i) {
            orderNumbers[i] = i + 1;
            dataIds[i] = $(this).data('id');
            $(this).find('.question_number').html(i + 1);
            //console.log($(this).data('id'));
        });
        $.ajax({
            url: urlOrder,
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            },
            data: { dataIds: dataIds, orderNumbers: orderNumbers },
            method: 'post',
            beforeSend: function () {
                $('.loading_footer').css('display', 'flex');
            },
            success: function (data) {

                $('.loading_footer').hide();


            }, error: function (data) {

            }
        });
        console.log(orderNumbers);
        console.log(dataIds);
        e.className += " card-moved"
    }).on("over", function (e, t) {
        t.className += " card-over"
    }).on("out", function (e, t) {
        t.className = t.className.replace("card-over", "")
    }), dragula([document.getElementById("copy-left"), document.getElementById("copy-right")], {
        copy: !0
    }), dragula([document.getElementById("left-handles"), document.getElementById("right-handles")], {
        moves: function (e, t, n) {
            return n.classList.contains("handle")
        }
    }), dragula([document.getElementById("left-titleHandles"), document.getElementById("right-titleHandles")], {
        moves: function (e, t, n) {
            return n.classList.contains("titleArea")
        }
    })
}
dragulaMove();
//});